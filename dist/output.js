document.write('<!doctype html><meta charset=UTF-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><title>Market Street Tycoon</title><style>#c2d{height:100vh;aspect-ratio:160/144;position:absolute;image-rendering:pixelated;background-color:#000}body,html{margin:0;background-color:#111;display:flex;justify-content:center;align-items:center;height:100%;user-select:none}@media (max-width:900px){body{background:#f7cebd}#gamepad{position:fixed;top:0;left:0;height:100vh;width:100vw}b{position:absolute;display:inline-flex;border:2px solid;border-radius:7vmax;height:7vmax;width:7vmax;font-size:3vmax;color:#3f2e28;justify-content:center;align-items:center;font-family:monospace;transition:50ms ease-in-out}b:active{color:#f7cebd;transform:scale(1.2)}#down,#up{left:8vmax;bottom:20vmax}#down{bottom:7vmax}#left,#right{left:1.5vmax;bottom:13.5vmax}#right{left:14.5vmax}#ok{right:8vmax;bottom:13.5vmax}}@media (orientation:portrait){body{align-items:flex-start;padding-top:20vh}#c2d{height:auto;width:100vw}#ok{right:7vmax}}</style><div id=gamepad><b id=up>▲</b><b id=down>▼</b><b id=left>◀</b><b id=right>▶</b><b id=ok>OK</b></div><canvas id=c2d></canvas><canvas id=f height=20 hidden style="border:1px solid" width=250></canvas>');let k,m,n=[],p={E:-5,F:-4,G:-2,a:0,b:2,c:3,d:5,e:7,"-":-999};"GddGddGccGccGeeGeeFddFddEaaGddGddaddGddaddGdbG--".split("").forEach(a=>{n.push(-p[a])});
let q=0,r=0,t=(a=!1)=>{if(r+.25*q<k.currentTime){var b=n[q],c=r+.25*q;let e=k.createOscillator();var d=k.createGain(),g=k.createBiquadFilter();g.type="bandpass";g.frequency.setValueAtTime(800,c);e.type="square";e.connect(d);d.connect(g).connect(k.destination);d.gain.setValueAtTime(.01,c);g=.8;d.gain.linearRampToValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*(1.5-g));d.gain.linearRampToValueAtTime(.01,c+.375);e.frequency.setValueAtTime(440/1.06**b,c);g=m=k.createBufferSource();
b=.25*k.sampleRate;d=k.createBuffer(1,b,k.sampleRate);let h=d.getChannelData(0);for(let l=0;l<b;l++)h[l]=2*Math.random()-1;g.buffer=d;b=k.createBiquadFilter();b.type="bandpass";b.frequency.setValueAtTime(500,c);d=k.createGain();d.gain.setValueAtTime(.01,c);g=.47;d.gain.exponentialRampToValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*(.9-g));d.gain.exponentialRampToValueAtTime(.01,c+.25);m.connect(b).connect(d).connect(k.destination);m.start();e.start(c);e.stop(c+.375);q++;if(q==n.length){if(!a)return;
r=k.currentTime+.25;q=0}}setTimeout(t,10)};function u(a,b){var c=[];a.g.M?.();a.g=b;a.g.J?.(...c)}class v{constructor(a,...b){this.g=a;this.g.J?.(...b)}}let w,x;function z(a,b,c){b=b.targetTouches[0]?.target?.id;c?b&&(a.A=b):a.A=""}function A(a,b){var c=B;c.s&&!c.g.s&&0<a.selection&&a.selection--;c.o&&!c.g.o&&a.selection<b&&a.selection++}
class C{constructor(){this.H=this.l=this.v=this.u=this.o=this.s=!1;this.h=new Map;this.A="";this.g={s:this.s,o:this.o,u:this.u,v:this.v,l:this.l,H:this.H};document.addEventListener("keydown",a=>{this.h.set(a.code,!0)});document.addEventListener("keyup",a=>{this.h.set(a.code,!1)});this.i=new DOMPoint;document.addEventListener("touchstart",a=>z(this,a,!0));document.addEventListener("touchend",a=>z(this,a,!1))}}
let B=new C,D=["apples","bread","oil"],E="Catarina Leonor Bento Marcos Apar\u00edcia Isabel Manuel Gra\u00e7a Teresa Vicente Jacinta Jo\u00e3o Diogo Sim\u00e3o Luciana Gil".split(" "),F=()=>{let a=E.pop();E.unshift(a);return a};class G{constructor(){this.B=[];this.j={};this.m={};this.K=1;this.C=20;var a={I:"apples",L:F(),m:10,j:10};this.B.push(a);a={I:"apples",L:F(),m:20,j:24};this.B.push(a)}}
function H(a){A(a,a.i.length);let b=B.u&&!B.g.u;var c=B.v&&!B.g.v;(b||c)&&a.selection<Object.keys(a.g.j).length&&(c=Object.entries(a.g.j)[a.selection])&&void 0!=a.g.m[c[0]]&&(a.g.m[c[0]]=Math.max(0,a.g.m[c[0]]+(b?-1:1)));B.l&&!B.g.l&&a.selection==a.i.length&&(a.h=0,setTimeout(()=>{u(x,new I(a.g))},1200))}
class J{constructor(a){this.selection=0;this.i=[];this.h=2;this.g=a}J(){this.i=D.filter(a=>{let b=this.g.j[a];this.g.m[a]||(this.g.m[a]=15);return!!b})}D(a=0){K();L();M(N,`Week ${this.g.K} - Manage Stock`,1,1,"indianred");M(N,`${this.g.C}$`,160,1,"green","right");D.forEach((b,c)=>{let d=24*c+24,g=this.g.j[b];g&&(M(N,b,1,1+d,"gray"),M(N,`${g}`,1,d+11,"gray"),["-","+"].map((e,h)=>O(100+53*h,d+5,this.selection===c?"white":"gray",e)),M(N,`${this.g.m[b]}$`,127,d+7,"gray","center"))});O(80,129,this.selection===
this.i.length?"white":"gray","next");2!=this.h&&(this.h=Math.min(1,this.h+a/1E3),P(1-this.h));H(this)}}let R={apples:{data:"@X@@C@RSERRBWRGx\u007f@",size:6,padding:6,y:0},bread:{data:"hmmEmoomm}}momm}hmmExmmGx\u007f\u007fG@@@@",size:8,padding:9,y:-1},oil:{data:"@mm@@m@@XC@[[[X[[C_[{x\u007f\u007fG",size:7,padding:9,y:-1}};
function S(a){A(a,a.g.B.length);if(B.l&&!B.g.l){let b=a.g.B[a.selection];b&&0<b.j&&b.m<=a.g.C&&(a.g.C-=b.m,a.g.j[b.I]=(a.g.j[b.I]||0)+b.j);a.selection==a.g.B.length&&u(x,new J(a.g))}}
class T{constructor(a){this.selection=0;this.g=a}D(){K();L();M(N,`Week ${this.g.K} - Suppliers`,1,1,"indianred");M(N,`${this.g.C}$`,160,1,"green","right");this.g.B.forEach((a,b)=>{let c=24*b+24;U(N,R[a.I],3,c+6);M(N,a.L,12,1+c,"gray");let d=`${a.j} ${a.I}   ${a.m}$`;M(N,a.j?d:"soldout",12,c+11,"gray");O(140,c+5,this.selection===b?"white":"gray","BUY")});O(80,129,this.selection===this.g.B.length?"white":"gray","next");S(this)}}
class I{constructor(a){this.i=[];this.time=this.g=0;this.h=a;for(a=20;a--;){let b=.5<Math.random()?1:-1;this.i.push({height:Math.round(10*Math.random()-5),step:Math.round(160*Math.random()*b),speed:(.5*Math.random()+.5)*b})}}J(){k=new AudioContext;r=k.currentTime;r=q=0;t(!1)}D(a=0){K();var b=N;b.g.fillStyle=V(b,30,0,38,0);b.g.fillRect(30,23,8,85);b.g.fillStyle=V(b,122,0,130,0);b.g.fillRect(122,23,8,85);b.g.fillStyle=V(b,0,23,0,27);b.g.fillRect(18,23,124,4);for(var c=0;7>c;c++)b.g.beginPath(),b.g.fillStyle=
c%2?"#b77e62":"#752a1a",W(b,32+16*c,32,8),b.g.fill(),b.g.beginPath(),b.g.fillStyle=c%2?"#f7cebd":"#c3472c",W(b,32+16*c,30,8),b.g.rect(24+16*c,22,16,8),b.g.fill();b=N;for(c=0;3>c;c++)b.g.fillStyle="#6d412e",b.g.fillRect(35+30*c,76,30,36),b.g.fillStyle="#b77e62",b.g.fillRect(30*c+36,100,28,3),b.g.fillRect(30*c+36,104,28,3),b.g.fillRect(30*c+36,108,28,3),b.g.fillStyle="#3f2e28",b.g.fillRect(30*c+36,77,28,22);X(this.h.j);b=this.h;c=N;c.g.fillStyle="#f7cebd";c.g.fillRect(3,3,50,12);c.g.fillRect(107,3,
50,12);M(c,`Week ${b.K}`,5,5,"#3f2e28");M(c,`${b.C}$`,155,5,"#3f2e28","right");aa(this.i);b=N;c=performance.now()-b.time;b.time=performance.now();b.i=.99*b.i+1E3/c*.01;b.g.fillText(`${Math.round(b.i)}FPS`,10,134);c=this.time;b=N;b.g.beginPath();b.g.fillStyle="#f7cebd";W(b,80,8,7);b.g.fill();c=2*Math.PI*c/12E3-Math.PI/2;ba(b,80+6*Math.cos(c),8+6*Math.sin(c));12E3>this.time&&(this.time+=a);12E3<this.time?0<this.g?(this.g=Math.max(0,this.g-a/1E3),P(this.g)):u(x,new T(this.h)):1>this.g&&(this.g=Math.min(1,
this.g+a/1E3),P(this.g))}}function K(){var a=N;for(let g=0;10>=g;g++)for(let e=0;6>=e;e++){var b=a,c=26*e-(g%2?18:5),d=16*g-5;b.g.fillStyle="#3f2e28";b.g.fillRect(c,d,26,16);b.g.fillStyle="#7d736e";b.g.fillRect(c+1,d+1,25,15)}a.g.fillStyle="#40312a";a.g.fillRect(0,90,160,54)}function L(){var a=N;a.g.fillStyle="#3f2e28";a.g.fillRect(0,0,160,144)}
function M(a,b,c,d,g="white",e="left"){Y(a);a.h.font="10px sans";a.h.textBaseline="middle";a.h.textAlign=e;e="center"==e?125:"right"==e?250:0;a.h.fillText(b,e,5);b=a.h.getImageData(0,0,250,32);for(let h=0;250>h;h++)for(let l=0;32>l;l++)if(80<b.data[4*(250*l+h)+1]||80<b.data[4*(250*l+h)+2]||80<b.data[4*(250*l+h)+3])a.g.fillStyle=g,a.h.fillRect(h,l,1,1),a.g.fillRect(h+c-e,l+d,1,1)}
function O(a,b,c,d){var g=N;g.g.strokeStyle=c;g.g.fillStyle=c;c=10*d.length;g.g.fillRect(a-c/2,b,c,13);M(g,d,a,b+2,"#3f2e28","center")}function P(a){var b=N;let c=4;for(;c--;){let d=4;for(;d--;){let g=Math.round(-(Math.cos(Math.PI*a)-1)/2*(160+32*d)),e=36*d;b.g.fillStyle="#c3472c";b.g.fillRect(20*c-g,e,17,36);b.g.fillRect(160-20*(c+1)+g,e,17,36);b.g.fillStyle="#752a1a";b.g.fillRect(160-20*(c+1)+17+g,e,3,36);b.g.fillRect(20*c-g+17,e,3,36)}}}
function U(a,b,c,d){let g=[];b.data.replace(/./g,e=>{e=e.charCodeAt();g.push(e&7);g.push(e>>3&7)});for(let e=0;e<b.size;e++)for(let h=0;h<b.size;h++)if(g[e*b.size+h]){let l=3*(g[e*b.size+h]-1);a.g.fillStyle="#"+"000c422a615bea0ddd642".substring(l,l+3);a.g.fillRect(c+h,d+e,1,1)}}
function X(a){var b=N;Object.entries(a).forEach(([c,d],g)=>{c=R[c];let e=Math.floor(27/c.padding);d=Math.min(d,e*Math.ceil(25/c.padding));for(let h=0;h<d;h++)U(b,c,37+h%e*c.padding+30*g+(7>c.padding?Math.floor(h/e)%2*c.padding/2:0),73+Math.floor(h/e)*(c.padding-1)-c.y)})}
function aa(a){var b=N;b.g.beginPath();b.g.fillStyle="#00000055";a.forEach(c=>{let d=120+c.height+Math.round(Math.sin(c.step/2)),g=Math.round(c.step);W(b,g+17,d,10,.7);W(b,g,d+20,15,.7);c.step+=c.speed;-40>c.step?c.step=200:200<c.step&&(c.step=-40)});b.g.fill()}function Y(a){a.h.clearRect(0,0,a.h.canvas.width,a.h.canvas.height)}
function ba(a,b,c){let d=80,g=8;b=Math.round(b);c=Math.round(c);b-=80;c-=8;let e=Math.max(Math.abs(b),Math.abs(c));b/=e;c/=e;let h=[];for(a.g.fillStyle="#3f2e28";e--;)h.push([d,g]),d+=b,g+=c;a.g.beginPath();h.map(([l,y])=>{a.g.rect(Math.round(l),Math.round(y),1,1)});a.g.fill()}
function W(a,b,c,d,g=0){let e=d,h=0,l=0;for(a.g.rect(b-e,c,d<<1,1);e>h;)l-=--e-++h,0>l&&(l+=e++),d=Math.round(g*e),a.g.rect(b-h+d,c-e,h<<1,1),a.g.rect(b-h-d,c+e,h<<1,1),d=Math.round(g*h),a.g.rect(b-e+d,c-h,e<<1,1),a.g.rect(b-e-d,c+h,e<<1,1)}function V(a,b,c,d,g){var e=[[.25,"#6d412e"],[.75,"#b77e62"],[1,"#6d412e"]];let h=a.g.createLinearGradient(b,c,d,g);e.forEach(([l,y],Q)=>{0!=Q&&h.addColorStop(e[Q-1][0],y);h.addColorStop(l,y)});return h}
class ca{constructor(){this.i=60;this.time=0;this.g=c2d.getContext("2d");this.h=f.getContext("2d");this.g.canvas.height=144;this.g.canvas.width=160}}let N=new ca;class da{constructor(){this.g=new G;x=new v(new T(this.g),...[])}D(a){x.g.D(a)}}let ea=new da;
class fa{constructor(){this.g=!0}D(){K();L();M(N,"Market Street Tycoon",10,40);M(N,"Start",10,60,this.g?"white":"gray");M(N,"Toggle Fullscreen",10,70,this.g?"gray":"white");if(B.s&&!B.g.s||B.o&&!B.g.o)this.g=!this.g;B.l&&!B.g.l&&(this.g?u(w,ea):document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen())}}w=new v(new fa,...[]);let Z=0;
(function ha(a){let c=a-Z;Z=a;a=B;a.g.s=a.s;a.g.o=a.o;a.g.u=a.u;a.g.v=a.v;a.g.l=a.l;a.g.H=a.H;let d=navigator.getGamepads()[0],g=a.h.get("KeyA")||a.h.get("ArrowLeft")||"left"===a.A||d?.buttons[14].pressed?-1:0,e=a.h.get("KeyD")||a.h.get("ArrowRight")||"right"===a.A||d?.buttons[15].pressed?1:0,h=a.h.get("KeyW")||a.h.get("ArrowUp")||"up"===a.A||d?.buttons[12].pressed?-1:0,l=a.h.get("KeyS")||a.h.get("ArrowDown")||"down"===a.A||d?.buttons[13].pressed?1:0;a.i.x=g+e||d?.axes[0]||0;a.i.y=h+l||d?.axes[1]||
0;.1>Math.hypot(a.i.x,a.i.y)&&(a.i.x=0,a.i.y=0);a.s=0>a.i.y;a.o=0<a.i.y;a.u=0>a.i.x;a.v=0<a.i.x;a.l=!!(a.h.get("Enter")||"ok"===a.A||d?.buttons[0].pressed||d?.buttons[9].pressed);a.H=!(!a.h.get("Escape")&&!d?.buttons[8].pressed);a=N;Y(a);a.g.clearRect(0,0,160,144);w.g.D(c);requestAnimationFrame(ha)})(0);