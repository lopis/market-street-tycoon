document.write('<!doctype html><meta charset=UTF-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><title>Market Street Tycoon</title><style>#c2d{height:100vh;aspect-ratio:160/144;position:absolute;image-rendering:pixelated;background-color:#000}body,html{margin:0;background-color:#111;display:flex;justify-content:center;align-items:center;height:100%;user-select:none}@media (max-width:900px){body{background:#f7cebd}#gamepad{position:fixed;top:0;left:0;height:100vh;width:100vw}b{position:absolute;display:inline-flex;border:2px solid;border-radius:7vmax;height:7vmax;width:7vmax;font-size:3vmax;color:#3f2e28;justify-content:center;align-items:center;font-family:monospace;transition:50ms ease-in-out}b:active{color:#f7cebd;transform:scale(1.2)}#down,#up{left:8vmax;bottom:20vmax}#down{bottom:7vmax}#left,#right{left:1.5vmax;bottom:13.5vmax}#right{left:14.5vmax}#ok{right:8vmax;bottom:13.5vmax}}@media (orientation:portrait){body{align-items:flex-start;padding-top:20vh}#c2d{height:auto;width:100vw}#ok{right:7vmax}}</style><div id=gamepad><b id=up>▲</b><b id=down>▼</b><b id=left>◀</b><b id=right>▶</b><b id=ok>OK</b></div><canvas id=c2d></canvas><canvas id=f height=20 hidden style="border:1px solid" width=250></canvas>');let l,m,n=[],p={E:-5,F:-4,G:-2,a:0,b:2,c:3,d:5,e:7,"-":-999};"GddGddGccGccGeeGeeFddFddEaaGddGddaddGddaddGdbG--".split("").forEach(a=>{n.push(-p[a])});
let q=!0,r=0,t=0,u=(a=!1)=>{if(q){if(t+.25*r<l.currentTime){var b=n[r],c=t+.25*r;let e=l.createOscillator();var d=l.createGain(),g=l.createBiquadFilter();g.type="bandpass";g.frequency.setValueAtTime(800,c);e.type="square";e.connect(d);d.connect(g).connect(l.destination);d.gain.setValueAtTime(.01,c);g=.8;d.gain.linearRampToValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*(1.5-g));d.gain.linearRampToValueAtTime(.01,c+.375);e.frequency.setValueAtTime(440/1.06**
b,c);g=m=l.createBufferSource();b=.25*l.sampleRate;d=l.createBuffer(1,b,l.sampleRate);let h=d.getChannelData(0);for(let k=0;k<b;k++)h[k]=2*Math.random()-1;g.buffer=d;b=l.createBiquadFilter();b.type="bandpass";b.frequency.setValueAtTime(500,c);d=l.createGain();d.gain.setValueAtTime(.01,c);g=.47;d.gain.exponentialRampToValueAtTime(.3,c+.25*g);d.gain.setValueAtTime(.3,c+.25*(.9-g));d.gain.exponentialRampToValueAtTime(.01,c+.25);m.connect(b).connect(d).connect(l.destination);m.start();e.start(c);e.stop(c+
.375);r++;if(r==n.length){if(!a)return;t=l.currentTime+.25;r=0}}setTimeout(u,.25)}};function v(a,b){var c=[];a.g.M?.();a.g=b;a.g.K?.(...c)}class w{constructor(a,...b){this.g=a;this.g.K?.(...b)}}let x,y;function A(a,b,c){b=b.targetTouches[0]?.target?.id;c?b&&(a.B=b):a.B=""}function B(a,b){var c=C;c.s&&!c.g.s&&0<a.selection&&a.selection--;c.o&&!c.g.o&&a.selection<b&&a.selection++}
class D{constructor(){this.H=this.j=this.A=this.v=this.o=this.s=!1;this.h=new Map;this.B="";this.g={s:this.s,o:this.o,v:this.v,A:this.A,j:this.j,H:this.H};document.addEventListener("keydown",a=>{this.h.set(a.code,!0)});document.addEventListener("keyup",a=>{this.h.set(a.code,!1)});this.i=new DOMPoint;document.addEventListener("touchstart",a=>A(this,a,!0));document.addEventListener("touchend",a=>A(this,a,!1))}}
let C=new D,E=["apples","bread","oil"],F="Catarina Leonor Bento Marcos Apar\u00edcia Isabel Manuel Gra\u00e7a Teresa Vicente Jacinta Jo\u00e3o Diogo Sim\u00e3o Luciana Gil".split(" "),G=()=>{let a=F.pop();F.unshift(a);return a};class H{constructor(){this.u=[];this.l={};this.m={};this.D=1;this.I=20;var a={J:"apples",L:G(),m:10,l:10};this.u.push(a);a={J:"apples",L:G(),m:20,l:24};this.u.push(a)}}
function I(a){B(a,a.i.length);let b=C.v&&!C.g.v;var c=C.A&&!C.g.A;(b||c)&&a.selection<Object.keys(a.g.l).length&&(a.active=[a.selection,b?"-":"+"],setTimeout(()=>{a.active=[-1,""]},100),(c=Object.entries(a.g.l)[a.selection])&&void 0!=a.g.m[c[0]]&&(a.g.m[c[0]]=Math.max(0,a.g.m[c[0]]+(b?-1:1))));C.j&&!C.g.j&&a.selection==a.i.length&&(a.h=0,setTimeout(()=>{v(y,new J(a.g))},1200))}
class K{constructor(a){this.selection=0;this.active=[-1,""];this.i=[];this.h=2;this.g=a}K(){this.i=E.filter(a=>{let b=this.g.l[a];this.g.m[a]||(this.g.m[a]=15);return!!b})}C(a=0){L(this.g.D);M("Manage stock",this.g);E.forEach((b,c)=>{let d=24*c+24,g=this.g.l[b];g&&(N(O,b,10,1,1+d,"#FFFFFF88"),N(O,`${g}`,10,1,d+11,"#FFFFFF88"),["-","+"].map((e,h)=>P(100+53*h,d+5,this.selection===c?"white":"#FFFFFF88",e,this.active[0]===c&&this.active[1]===e)),N(O,`${this.g.m[b]}$`,10,127,d+7,"#FFFFFF88","center"))});
P(80,129,this.selection===this.i.length?"white":"#FFFFFF88","next");2!=this.h&&(this.h=Math.min(1,this.h+a/1E3),Q(1-this.h));I(this)}}let S={apples:{data:"@X@@C@RSERRBWRGx\u007f@",size:6,padding:6,y:0},bread:{data:"hmmEmoomm}}momm}hmmExmmGx\u007f\u007fG@@@@",size:8,padding:9,y:-1},oil:{data:"@mm@@m@@XC@[[[X[[C_[{x\u007f\u007fG",size:7,padding:9,y:-1}};
function T(a){B(a,a.g.u.length);if(C.j&&!C.g.j){a.active=a.selection;setTimeout(()=>{a.active=-1},100);let b=a.g.u[a.selection];b&&0<b.l&&b.m<=a.g.I&&(a.g.I-=b.m,a.g.l[b.J]=(a.g.l[b.J]||0)+b.l);a.selection==a.g.u.length&&v(y,new K(a.g))}}
class U{constructor(a){this.selection=0;this.active=-1;this.g=a}C(){L(this.g.D);M("Suppliers",this.g);this.g.u.forEach((a,b)=>{let c=24*b+24;V(O,S[a.J],3,c+6);N(O,a.L,10,12,1+c,"#FFFFFF88");let d=`${a.l} ${a.J}   ${a.m}$`;N(O,a.l?d:"soldout",10,12,c+11,"#FFFFFF88");P(140,c+5,this.selection===b?"white":"#FFFFFF88","BUY",this.active===b)});P(80,129,this.selection===this.g.u.length?"white":"#FFFFFF88","next",this.active===this.g.u.length);T(this)}}
class aa{constructor(a){this.selection=0;this.g=2;this.h=a}C(a=0){L(this.h.D);M("Summary",this.h);P(80,129,"white","next");2!=this.g&&(this.g=Math.min(1,this.g+a/1E3),Q(1-this.g));C.j&&!C.g.j&&(this.h.D++,v(y,new U(this.h)))}}
class J{constructor(a){this.i=[];this.time=this.g=0;this.h=a;for(a=20;a--;){let b=.5<Math.random()?1:-1;this.i.push({height:Math.round(10*Math.random()-5),step:Math.round(160*Math.random()*b),speed:(.5*Math.random()+.5)*b})}}K(){l=new AudioContext;t=l.currentTime;t=r=0;u(!1)}M(){q=!1}C(a=0){var b=O;for(let e=0;10>=e;e++)for(let h=0;6>=h;h++){var c=b,d=26*h-(e%2?18:5),g=16*e-5;c.g.fillStyle="#322722";c.g.fillRect(d,g,26,16);c.g.fillStyle="#7d736e";c.g.fillRect(d+1,g+1,25,15)}b.g.fillStyle="#40312a";
b.g.fillRect(0,90,160,54);b=O;b.g.fillStyle=W(b,30,0,38,0);b.g.fillRect(30,23,8,85);b.g.fillStyle=W(b,122,0,130,0);b.g.fillRect(122,23,8,85);b.g.fillStyle=W(b,0,23,0,27);b.g.fillRect(18,23,124,4);for(c=0;7>c;c++)b.g.beginPath(),b.g.fillStyle=c%2?"#b77e62":"#752a1a",X(b,32+16*c,32,8),b.g.fill(),b.g.beginPath(),b.g.fillStyle=c%2?"#f7cebd":"#c3472c",X(b,32+16*c,30,8),b.g.rect(24+16*c,22,16,8),b.g.fill();b=O;for(c=0;3>c;c++)b.g.fillStyle="#6d412e",b.g.fillRect(35+30*c,76,30,36),b.g.fillStyle="#b77e62",
b.g.fillRect(30*c+36,100,28,3),b.g.fillRect(30*c+36,104,28,3),b.g.fillRect(30*c+36,108,28,3),b.g.fillStyle="#322722",b.g.fillRect(30*c+36,77,28,22);ba(this.h.l);b=this.h;c=O;c.g.fillStyle="#f7cebd";c.g.fillRect(3,3,50,12);c.g.fillRect(107,3,50,12);N(c,`Week ${b.D}`,10,5,5,"#322722");N(c,`${b.I}$`,10,155,5,"#322722","right");ca(this.i);b=O;c=performance.now()-b.time;b.time=performance.now();b.i=.99*b.i+1E3/c*.01;b.g.fillText(`${Math.round(b.i)}FPS`,10,134);c=this.time;b=O;b.g.beginPath();b.g.fillStyle=
"#f7cebd";X(b,80,8,7);b.g.fill();c=2*Math.PI*c/12E3-Math.PI/2;da(b,80+6*Math.cos(c),8+6*Math.sin(c));12E3>this.time&&(this.time+=a);12E3<this.time?0<this.g?(this.g=Math.max(0,this.g-a/1E3),Q(this.g)):v(y,new aa(this.h)):1>this.g&&(this.g=Math.min(1,this.g+a/1E3),Q(this.g))}}function L(a){var b=O;let c=["#4621ac","#322722","#752a1a","#17812e","#1155bb"];b.g.fillStyle=c[a%c.length];b.g.fillRect(0,0,160,144)}
function M(a,b){var c=O;c.g.fillStyle="#00000088";c.g.fillRect(0,0,160,12);N(c,`Week ${b.D} - ${a}`,10,1,1,"#c3472c");N(c,`${b.I}$`,10,160,1,"#17812e","right")}
function N(a,b,c,d,g,e="white",h="left"){var k=`${c}px sans`;Y(a);a.h.font=k;a.h.textBaseline="middle";a.h.textAlign=h;h="center"==h?125:"right"==h?250:0;a.h.fillText(b,h,c/2);b=a.h.getImageData(0,0,250,32);for(c=0;250>c;c++)for(k=0;32>k;k++)if(80<b.data[4*(250*k+c)+1]||80<b.data[4*(250*k+c)+2]||80<b.data[4*(250*k+c)+3])a.g.fillStyle=e,a.h.fillRect(c,k,1,1),a.g.fillRect(c+d-h,k+g,1,1)}
function P(a,b,c,d,g=!1){var e=O;g=g?1:0;e.g.strokeStyle=c;e.g.fillStyle=c;c=10*d.length;e.g.translate(g,g);e.g.fillRect(a-c/2,b,c,13);N(e,d,10,a,b+2,"#322722","center");e.g.translate(-g,-g)}function Q(a){var b=O;let c=4;for(;c--;){let d=4;for(;d--;){let g=Math.round(-(Math.cos(Math.PI*a)-1)/2*(160+32*d)),e=36*d;b.g.fillStyle="#c3472c";b.g.fillRect(20*c-g,e,17,36);b.g.fillRect(160-20*(c+1)+g,e,17,36);b.g.fillStyle="#752a1a";b.g.fillRect(160-20*(c+1)+17+g,e,3,36);b.g.fillRect(20*c-g+17,e,3,36)}}}
function V(a,b,c,d){let g=[];b.data.replace(/./g,e=>{e=e.charCodeAt();g.push(e&7);g.push(e>>3&7)});for(let e=0;e<b.size;e++)for(let h=0;h<b.size;h++)if(g[e*b.size+h]){let k=3*(g[e*b.size+h]-1);a.g.fillStyle="#"+"000c422c415bea0ddd642".substring(k,k+3);a.g.fillRect(c+h,d+e,1,1)}}
function ba(a){var b=O;Object.entries(a).forEach(([c,d],g)=>{c=S[c];let e=Math.floor(27/c.padding);d=Math.min(d,e*Math.ceil(25/c.padding));for(let h=0;h<d;h++)V(b,c,37+h%e*c.padding+30*g+(7>c.padding?Math.floor(h/e)%2*c.padding/2:0),73+Math.floor(h/e)*(c.padding-1)-c.y)})}
function ca(a){var b=O;b.g.beginPath();b.g.fillStyle="#00000055";a.forEach(c=>{let d=120+c.height+Math.round(Math.sin(c.step/2)),g=Math.round(c.step);X(b,g+17,d,10,.7);X(b,g,d+20,15,.7);c.step+=c.speed;-40>c.step?c.step=200:200<c.step&&(c.step=-40)});b.g.fill()}function Y(a){a.h.clearRect(0,0,a.h.canvas.width,a.h.canvas.height)}
function da(a,b,c){let d=80,g=8;b=Math.round(b);c=Math.round(c);b-=80;c-=8;let e=Math.max(Math.abs(b),Math.abs(c));b/=e;c/=e;let h=[];for(a.g.fillStyle="#322722";e--;)h.push([d,g]),d+=b,g+=c;a.g.beginPath();h.map(([k,z])=>{a.g.rect(Math.round(k),Math.round(z),1,1)});a.g.fill()}
function X(a,b,c,d,g=0){let e=d,h=0,k=0;for(a.g.rect(b-e,c,d<<1,1);e>h;)k-=--e-++h,0>k&&(k+=e++),d=Math.round(g*e),a.g.rect(b-h+d,c-e,h<<1,1),a.g.rect(b-h-d,c+e,h<<1,1),d=Math.round(g*h),a.g.rect(b-e+d,c-h,e<<1,1),a.g.rect(b-e-d,c+h,e<<1,1)}function W(a,b,c,d,g){var e=[[.25,"#6d412e"],[.75,"#b77e62"],[1,"#6d412e"]];let h=a.g.createLinearGradient(b,c,d,g);e.forEach(([k,z],R)=>{0!=R&&h.addColorStop(e[R-1][0],z);h.addColorStop(k,z)});return h}
class ea{constructor(){this.i=60;this.time=0;this.g=c2d.getContext("2d");this.h=f.getContext("2d");this.g.canvas.height=144;this.g.canvas.width=160}}let O=new ea;class fa{constructor(){this.g=new H;y=new w(new U(this.g),...[])}C(a){y.g.C(a)}}let ha=new fa;
class ia{constructor(){this.g=!0}C(){L(1);["Market","Street","Tycoon"].map((a,b)=>{N(O,a,18,80,8+16*b,"#c3472c","center")});N(O,this.g?"\u25b8 Start":"  Start",10,10,80,this.g?"white":"#FFFFFF88");N(O,this.g?"  Fullscreen":"\u25b8 Fullscreen",10,10,95,this.g?"#FFFFFF88":"white");if(C.s&&!C.g.s||C.o&&!C.g.o)this.g=!this.g;C.j&&!C.g.j&&(this.g?v(x,ha):document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen())}}x=new w(new ia,...[]);let Z=0;
(function ja(a){let c=a-Z;Z=a;a=C;a.g.s=a.s;a.g.o=a.o;a.g.v=a.v;a.g.A=a.A;a.g.j=a.j;a.g.H=a.H;let d=navigator.getGamepads()[0],g=a.h.get("KeyA")||a.h.get("ArrowLeft")||"left"===a.B||d?.buttons[14].pressed?-1:0,e=a.h.get("KeyD")||a.h.get("ArrowRight")||"right"===a.B||d?.buttons[15].pressed?1:0,h=a.h.get("KeyW")||a.h.get("ArrowUp")||"up"===a.B||d?.buttons[12].pressed?-1:0,k=a.h.get("KeyS")||a.h.get("ArrowDown")||"down"===a.B||d?.buttons[13].pressed?1:0;a.i.x=g+e||d?.axes[0]||0;a.i.y=h+k||d?.axes[1]||
0;.1>Math.hypot(a.i.x,a.i.y)&&(a.i.x=0,a.i.y=0);a.s=0>a.i.y;a.o=0<a.i.y;a.v=0>a.i.x;a.A=0<a.i.x;a.j=!!(a.h.get("Enter")||"ok"===a.B||d?.buttons[0].pressed||d?.buttons[9].pressed);a.H=!(!a.h.get("Escape")&&!d?.buttons[8].pressed);a=O;Y(a);a.g.clearRect(0,0,160,144);x.g.C(c);requestAnimationFrame(ja)})(0);