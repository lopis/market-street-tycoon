document.write('<!doctype html><meta charset=UTF-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><title>Market Street Tycoon</title><link rel="shortcut icon" type=image/x-icon><style>#c2d{height:100vh;aspect-ratio:160/144;position:absolute;image-rendering:pixelated;background-color:#000}body,html{margin:0;background-color:#111;display:flex;justify-content:center;align-items:center;height:100%;user-select:none}@media (max-width:900px){body{background:#f7cebd}#gamepad{position:fixed;top:0;left:0;height:100vh;width:100vw}b{position:absolute;display:inline-flex;border:2px solid;border-radius:7vmax;height:7vmax;width:7vmax;font-size:3vmax;color:#3f2e28;justify-content:center;align-items:center;font-family:monospace;transition:50ms ease-in-out}b:active{color:#f7cebd;transform:scale(1.2)}#down,#up{left:8vmax;bottom:20vmax}#down{bottom:7vmax}#left,#right{left:1.5vmax;bottom:13.5vmax}#right{left:14.5vmax}#ok{right:8vmax;bottom:13.5vmax}}@media (orientation:portrait){body{align-items:flex-start;padding-top:20vh}#gamepad{top:-10vw;left:4vw}#c2d{height:auto;width:100vw}#ok{right:7vmax}}</style><div id=gamepad><b id=up>▲</b><b id=down>▼</b><b id=left>◀</b><b id=right>▶</b><b id=ok>OK</b></div><canvas id=c2d></canvas><canvas id=font height=20 hidden style="border:1px solid" width=250></canvas>');let k,l,m=[],n={E:-5,F:-4,G:-2,a:0,b:2,c:3,d:5,e:7,"-":-999};"GddGddGccGccGeeGeeFddFddEaaGddGddaddGddaddGdbG--".split("").forEach(a=>{m.push(-n[a])});
let p=!0,q=0,r=0,t=(a=!1)=>{if(p){if(r+.25*q<k.currentTime){var b=m[q],c=r+.25*q;let f=k.createOscillator();var d=k.createGain(),e=k.createBiquadFilter();e.type="bandpass";e.frequency.setValueAtTime(800,c);f.type="square";f.connect(d);d.connect(e).connect(k.destination);d.gain.setValueAtTime(.01,c);e=.8;d.gain.linearRampToValueAtTime(.3,c+.25*e);d.gain.setValueAtTime(.3,c+.25*e);d.gain.setValueAtTime(.3,c+.25*(1.5-e));d.gain.linearRampToValueAtTime(.01,c+.375);f.frequency.setValueAtTime(440/1.06**
b,c);e=l=k.createBufferSource();b=.25*k.sampleRate;d=k.createBuffer(1,b,k.sampleRate);let g=d.getChannelData(0);for(let h=0;h<b;h++)g[h]=2*Math.random()-1;e.buffer=d;b=k.createBiquadFilter();b.type="bandpass";b.frequency.setValueAtTime(500,c);d=k.createGain();d.gain.setValueAtTime(.01,c);e=.47;d.gain.exponentialRampToValueAtTime(.3,c+.25*e);d.gain.setValueAtTime(.3,c+.25*(.9-e));d.gain.exponentialRampToValueAtTime(.01,c+.25);l.connect(b).connect(d).connect(k.destination);l.start();f.start(c);f.stop(c+
.375);q++;if(q==m.length){if(!a)return;r=k.currentTime+.25;q=0}}setTimeout(t,.25)}},u=["apples","bread","oil"],v="Catarina Leonor Bento Marcos Apar\u00edcia Isabel Manuel Gra\u00e7a Teresa Vicente Jacinta Jo\u00e3o Diogo Sim\u00e3o Luciana Gil".split(" "),w=()=>{let a=v.pop();v.unshift(a);return a};
class y{constructor(){this.A=[];this.l={};this.j={};this.C={};this.L={};this.B=1;this.history=[];this.I=20;var a={o:"bread",O:w(),j:10,l:10};this.C[a.o]=.6;this.L[a.o]=3;this.A.push(a);a={o:"apples",O:w(),j:20,l:24};this.C[a.o]=.5;this.L[a.o]=4;this.A.push(a);a={o:"oil",O:w(),j:25,l:10};this.C[a.o]=.3;this.L[a.o]=8;this.A.push(a)}save(a,b){this.history[this.B]={C:a,N:b}}}function z(a,b){var c=[];a.g.R?.();a.g=b;a.g.M?.(...c)}class A{constructor(a,...b){this.g=a;this.g.M?.(...b)}}let B,C;
function D(a,b,c){b=b.targetTouches[0]?.target?.id;c?b&&(a.s=b):a.s=""}function E(a,b){var c=F;c.v&&!c.g.v&&0<a.selection&&a.selection--;c.u&&!c.g.u&&a.selection<b&&a.selection++}
class G{constructor(){this.K=this.m=this.H=this.D=this.u=this.v=!1;this.h=new Map;this.s="";this.g={v:this.v,u:this.u,D:this.D,H:this.H,m:this.m,K:this.K};document.addEventListener("keydown",a=>{this.h.set(a.code,!0)});document.addEventListener("keyup",a=>{this.h.set(a.code,!1)});this.i=new DOMPoint;document.addEventListener("touchstart",a=>D(this,a,!0));document.addEventListener("touchend",a=>D(this,a,!1))}}let F=new G;
function H(a){E(a,a.i.length);let b=F.D&&!F.g.D;var c=F.H&&!F.g.H;(b||c)&&a.selection<Object.keys(a.g.l).length&&(a.active=[a.selection,b?"-":"+"],setTimeout(()=>{a.active=[-1,""]},100),(c=Object.entries(a.g.l)[a.selection])&&void 0!=a.g.j[c[0]]&&(a.g.j[c[0]]=Math.max(0,a.g.j[c[0]]+(b?-1:1))));F.m&&!F.g.m&&2===a.h&&a.selection==a.i.length&&(a.h=0,setTimeout(()=>{z(C,new I(a.g))},1200))}
class J{constructor(a){this.selection=0;this.active=[-1,""];this.i=[];this.h=2;this.g=a}M(){this.i=u.filter(a=>{let b=this.g.l[a];this.g.j[a]||(this.g.j[a]=15);return!!b})}J(a=0){K(this.g.B);L("Manage stock",this.g);let b=0;u.forEach(c=>{let d=24*b+24,e=this.g.l[c];e&&(M(N,c,10,1,1+d,"#FFFFFF88"),M(N,`${e}`,10,1,d+11,"#FFFFFF88"),["-","+"].map((f,g)=>O(100+53*g,d+5,this.selection===b?"white":"#FFFFFF88",f,this.active[0]===b&&this.active[1]===f)),M(N,`${this.g.j[c]}$`,10,127,d+7,"#FFFFFF88","center"),
b++)});O(80,129,this.selection===this.i.length?"white":"#FFFFFF88","next");2!=this.h&&(this.h=Math.min(1,this.h+a/1E3),P(1-this.h));H(this)}}let R={apples:{data:"@X@@C@RSERRBWRGx\u007f@",size:6,padding:6,y:0},bread:{data:"hmmEmoomm}}momm}hmmExmmGx\u007f\u007fG@@@@",size:8,padding:9,y:-1},oil:{data:"@mm@@m@@XC@[[[X[[C_[{x\u007f\u007fG",size:7,padding:9,y:-1}};
function S(a){E(a,a.g.A.length);if(F.m&&!F.g.m){a.active=a.selection;setTimeout(()=>{a.active=-1},100);let b=a.g.A[a.selection];b&&0<b.l&&b.j<=a.g.I&&(a.g.I-=b.j,a.g.l[b.o]=(a.g.l[b.o]||0)+b.l);a.selection==a.g.A.length&&z(C,new J(a.g))}}
class T{constructor(a){this.selection=0;this.active=-1;this.g=a}J(){K(this.g.B);L("Suppliers",this.g);this.g.A.forEach((a,b)=>{let c=24*b+24;U(N,R[a.o],3,c+6);M(N,a.O,10,12,1+c,"#FFFFFF88");let d=`${a.l} ${a.o}   ${a.j}$`;M(N,a.l?d:"soldout",10,12,c+11,"#FFFFFF88");O(140,c+5,this.selection===b?"white":"#FFFFFF88","BUY",this.active===b)});O(80,129,this.selection===this.g.A.length?"white":"#FFFFFF88","next",this.active===this.g.A.length);S(this)}}
class V{constructor(a){this.total=this.h=this.selection=0;this.g=a}R(){this.g.I+=this.total}M(){let a=this.g.history[this.g.B];Object.keys(a.N).map(b=>{let c=a.N[b]=Math.round(a.N[b]||0);a.C[b]=12E3*(a.C[b]||0)/50;this.total+=c*(this.g.j[b]||0);this.g.l[b]=Math.max(0,(this.g.l[b]||0)-c)})}J(a=0){K(this.g.B);L("Summary",this.g,this.total);O(80,129,"white","next");let b=this.g.history[this.g.B];Object.entries(b.N).map((c,d)=>{var e=c[0];c=c[1];d=36*d+24;U(N,R[e],3,d);M(N,`${e}  ${this.g.j[e]}$`,10,
12,d,"#FFFFFF88");let f=Math.min(8,8*(b.C[e]||0));M(N,`Demand:  ${"\u2588".repeat(f)}${"\u2591".repeat(8-f)}`,10,12,d+12,"#FFFFFF88");e=this.g.j[e]||0;M(N,`Sales:  ${c} x ${e}$ = ${c*e}$`,10,12,d+24,"#FFFFFF88")});1>this.h&&(this.h=Math.min(1,this.h+a/1E3),P(this.h));F.m&&!F.g.m&&(this.g.B++,z(C,new T(this.g)))}}
class I{constructor(a){this.P=[];this.s={};this.i={};this.time=this.h=0;this.g=a;for(a=20;a--;){let b=.5<Math.random()?1:-1;this.P.push({height:Math.round(10*Math.random()-5),step:Math.round(160*Math.random()*b),speed:(.5*Math.random()+.5)*b})}}M(){k=new AudioContext;r=k.currentTime;r=q=0;p=!0;t(!1);u.map(a=>{if(this.g.l[a]){let b=(this.g.L[a]||0)/(this.g.j[a]||1),c=this.g.C[a]||0;this.s[a]=b*c*50/12E3;this.i[a]=0;console.log(b,c)}})}R(){p=!1}J(a=0){aa();ba();ca();da(this.g.l,this.i);ea(this.g,this.i);
fa(this.P);ha();ia(this.time);12E3>this.time&&(this.time+=a,Object.entries(this.s).forEach(([b,c])=>{this.i[b]+=c*a}));12E3<this.time?0<this.h?this.h=Math.max(0,this.h-a/1E3):(this.g.save(this.s,this.i),z(C,new V(this.g))):1>this.h&&(this.h=Math.min(1,this.h+a/1E3));P(this.h)}}function K(a){var b=N;let c=["#4621ac","#322722","#752a1a","#17812e","#1155bb"];b.g.fillStyle=c[a%c.length];b.g.fillRect(0,0,160,144)}
function L(a,b,c=-1){var d=N;d.g.fillStyle="#00000088";d.g.fillRect(0,0,160,12);M(d,`Week ${b.B} - ${a}`,10,1,1,"#c3472c");M(d,`${b.I}$`,10,160,1,"#17812e","right");-1!=c&&M(d,`+ ${c}$`,10,160,13,"#17812e","right")}
function M(a,b,c,d,e,f="white",g="left"){var h=`${c}px sans`;W(a);a.h.font=h;a.h.textBaseline="middle";a.h.textAlign=g;g="center"==g?125:"right"==g?250:0;a.h.fillText(b,g,c/2);b=a.h.getImageData(0,0,250,32);for(c=0;250>c;c++)for(h=0;32>h;h++)if(80<b.data[4*(250*h+c)+1]||80<b.data[4*(250*h+c)+2]||80<b.data[4*(250*h+c)+3])a.g.fillStyle=f,a.h.fillRect(c,h,1,1),a.g.fillRect(c+d-g,h+e,1,1)}
function O(a,b,c,d,e=!1){var f=N;e=e?1:0;f.g.strokeStyle=c;f.g.fillStyle=c;c=10*d.length;f.g.translate(e,e);f.g.fillRect(a-c/2,b,c,13);M(f,d,10,a,b+2,"#322722","center");f.g.translate(-e,-e)}function P(a){var b=N;let c=4;for(;c--;){let d=4;for(;d--;){let e=Math.round(-(Math.cos(Math.PI*a)-1)/2*(160+32*d)),f=36*d;b.g.fillStyle="#c3472c";b.g.fillRect(20*c-e,f,17,36);b.g.fillRect(160-20*(c+1)+e,f,17,36);b.g.fillStyle="#752a1a";b.g.fillRect(160-20*(c+1)+17+e,f,3,36);b.g.fillRect(20*c-e+17,f,3,36)}}}
function U(a,b,c,d){let e=[];b.data.replace(/./g,f=>{f=f.charCodeAt();e.push(f&7);e.push(f>>3&7)});for(let f=0;f<b.size;f++)for(let g=0;g<b.size;g++)if(e[f*b.size+g]){let h=3*(e[f*b.size+g]-1);a.g.fillStyle="#"+"000c422c415bea0ddd642".substring(h,h+3);a.g.fillRect(c+g,d+f,1,1)}}
function aa(){var a=N;for(let e=0;10>=e;e++)for(let f=0;6>=f;f++){var b=a,c=26*f-(e%2?18:5),d=16*e-5;b.g.fillStyle="#322722";b.g.fillRect(c,d,26,16);b.g.fillStyle="#7d736e";b.g.fillRect(c+1,d+1,25,15)}a.g.fillStyle="#40312a";a.g.fillRect(0,90,160,54)}
function ba(){var a=N;a.g.fillStyle=X(a,30,0,38,0);a.g.fillRect(30,23,8,85);a.g.fillStyle=X(a,122,0,130,0);a.g.fillRect(122,23,8,85);a.g.fillStyle=X(a,0,23,0,27);a.g.fillRect(18,23,124,4);for(let b=0;7>b;b++)a.g.beginPath(),a.g.fillStyle=b%2?"#b77e62":"#752a1a",Y(a,32+16*b,32,8),a.g.fill(),a.g.beginPath(),a.g.fillStyle=b%2?"#f7cebd":"#c3472c",Y(a,32+16*b,30,8),a.g.rect(24+16*b,22,16,8),a.g.fill()}
function ca(){var a=N;for(let b=0;3>b;b++)a.g.fillStyle="#6d412e",a.g.fillRect(35+30*b,76,30,36),a.g.fillStyle="#b77e62",a.g.fillRect(30*b+36,100,28,3),a.g.fillRect(30*b+36,104,28,3),a.g.fillRect(30*b+36,108,28,3),a.g.fillStyle="#322722",a.g.fillRect(30*b+36,77,28,22)}
function da(a,b){var c=N;Object.entries(a).forEach(([d,e],f)=>{let g=R[d],h=Math.floor(27/g.padding);d=Math.min(Math.floor(e-b[d]),h*Math.ceil(25/g.padding));for(e=0;e<d;e++)U(c,g,37+e%h*g.padding+30*f+(7>g.padding?Math.floor(e/h)%2*g.padding/2:0),73+Math.floor(e/h)*(g.padding-1)-g.y)})}
function ea(a,b){var c=N;b=Object.entries(b).reduce((d,[e,f])=>d+(a.j[e]||0)*Math.floor(f),0);c.g.fillStyle="#f7cebd";c.g.fillRect(3,3,50,12);c.g.fillRect(107,3,50,12);M(c,`Week ${a.B}`,10,5,5,"#322722");M(c,`${a.I+b}$`,10,155,5,"#322722","right")}
function fa(a){var b=N;b.g.beginPath();b.g.fillStyle="#00000055";a.forEach(c=>{let d=120+c.height+Math.round(Math.sin(c.step/2)),e=Math.round(c.step);Y(b,e+17,d,10,.7);Y(b,e,d+20,15,.7);c.step+=c.speed;-40>c.step?c.step=200:200<c.step&&(c.step=-40)});b.g.fill()}function ha(){var a=N;let b=performance.now()-a.time;a.time=performance.now();a.i=.99*a.i+1E3/b*.01;a.g.fillText(`${Math.round(a.i)}FPS`,10,134)}
function ia(a){var b=N;b.g.beginPath();b.g.fillStyle="#f7cebd";Y(b,80,8,7);b.g.fill();a=2*Math.PI*a/12E3-Math.PI/2;ja(b,80+6*Math.cos(a),8+6*Math.sin(a))}function W(a){a.h.clearRect(0,0,a.h.canvas.width,a.h.canvas.height)}function ja(a,b,c){let d=80,e=8;b=Math.round(b);c=Math.round(c);b-=80;c-=8;let f=Math.max(Math.abs(b),Math.abs(c));b/=f;c/=f;let g=[];for(a.g.fillStyle="#322722";f--;)g.push([d,e]),d+=b,e+=c;a.g.beginPath();g.map(([h,x])=>{a.g.rect(Math.round(h),Math.round(x),1,1)});a.g.fill()}
function Y(a,b,c,d,e=0){let f=d,g=0,h=0;for(a.g.rect(b-f,c,d<<1,1);f>g;)h-=--f-++g,0>h&&(h+=f++),d=Math.round(e*f),a.g.rect(b-g+d,c-f,g<<1,1),a.g.rect(b-g-d,c+f,g<<1,1),d=Math.round(e*g),a.g.rect(b-f+d,c-g,f<<1,1),a.g.rect(b-f-d,c+g,f<<1,1)}function X(a,b,c,d,e){var f=[[.25,"#6d412e"],[.75,"#b77e62"],[1,"#6d412e"]];let g=a.g.createLinearGradient(b,c,d,e);f.forEach(([h,x],Q)=>{0!=Q&&g.addColorStop(f[Q-1][0],x);g.addColorStop(h,x)});return g}
class ka{constructor(){this.i=60;this.time=0;this.g=c2d.getContext("2d");this.h=font.getContext("2d");this.g.canvas.height=144;this.g.canvas.width=160}}let N=new ka;class la{constructor(){this.g=new y;C=new A(new T(this.g),...[])}J(a){C.g.J(a)}}let ma=new la;
class na{constructor(){this.g=!0}J(){K(1);["Market","Street","Tycoon"].map((a,b)=>{M(N,a,18,80,8+16*b,"#c3472c","center")});M(N,this.g?"\u25b8 Start":"  Start",10,10,80,this.g?"white":"#FFFFFF88");M(N,this.g?"  Fullscreen":"\u25b8 Fullscreen",10,10,95,this.g?"#FFFFFF88":"white");if(F.v&&!F.g.v||F.u&&!F.g.u)this.g=!this.g;F.m&&!F.g.m&&(this.g?z(B,ma):document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen())}}let oa=new na;
document.querySelector('link[type="image/x-icon"]').href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E\ud83c\udf4e%3C/text%3E%3C/svg%3E";B=new A(oa,...[]);let Z=0;
(function pa(a){let c=a-Z;Z=a;a=F;a.g.v=a.v;a.g.u=a.u;a.g.D=a.D;a.g.H=a.H;a.g.m=a.m;a.g.K=a.K;let d=navigator.getGamepads()[0],e=a.h.get("KeyA")||a.h.get("ArrowLeft")||"left"===a.s||d?.buttons[14].pressed?-1:0,f=a.h.get("KeyD")||a.h.get("ArrowRight")||"right"===a.s||d?.buttons[15].pressed?1:0,g=a.h.get("KeyW")||a.h.get("ArrowUp")||"up"===a.s||d?.buttons[12].pressed?-1:0,h=a.h.get("KeyS")||a.h.get("ArrowDown")||"down"===a.s||d?.buttons[13].pressed?1:0;a.i.x=e+f||d?.axes[0]||0;a.i.y=g+h||d?.axes[1]||
0;.1>Math.hypot(a.i.x,a.i.y)&&(a.i.x=0,a.i.y=0);a.v=0>a.i.y;a.u=0<a.i.y;a.D=0>a.i.x;a.H=0<a.i.x;a.m=!!(a.h.get("Enter")||"ok"===a.s||d?.buttons[0].pressed||d?.buttons[9].pressed);a.K=!(!a.h.get("Escape")&&!d?.buttons[8].pressed);a=N;W(a);a.g.clearRect(0,0,160,144);B.g.J(c);requestAnimationFrame(pa)})(0);